#!/usr/bin/env python3
from pymatgen.core import Composition
from math import sqrt
import sys

B2_bond_lengths = {
 'AlAl': 2.805262249719211,
 'AlTi': 2.7570188888816376,
 'AlZr': 2.935490102314915,
 'AlHf': 2.9059070110724914,
 'AlV': 2.6491889093998537,
 'AlNb': 2.7946915069905747,
 'AlTa': 2.7941036031272426,
 'AlCr': 2.5751599416188777,
 'AlMo': 2.708636905443616,
 'AlW': 2.711988232501556,
 'AlRe': 2.653059387018714,
 'AlRu': 2.603829855559585,
 'TiAl': 2.7570188888816376,
 'TiTi': 2.810474121277211,
 'TiZr': 2.9612715095340505,
 'TiHf': 2.9445255192919726,
 'TiV': 2.6985800750769795,
 'TiNb': 2.8249641822131335,
 'TiTa': 2.8327315970944316,
 'TiCr': 2.620091313839787,
 'TiMo': 2.742131495470326,
 'TiW': 2.752341959302402,
 'TiRe': 2.698171419482594,
 'TiRu': 2.6711202043400126,
 'ZrAl': 2.935490102314915,
 'ZrTi': 2.9612715095340505,
 'ZrZr': 3.0994666883692017,
 'ZrHf': 3.083453571916574,
 'ZrV': 2.867097152837066,
 'ZrNb': 2.9765220575746976,
 'ZrTa': 2.984102912659862,
 'ZrCr': 2.800178188453867,
 'ZrMo': 2.90223856222122,
 'ZrW': 2.9120818285185828,
 'ZrRe': 2.863217887278671,
 'ZrRu': 2.841902654830495,
 'HfAl': 2.9059070110724914,
 'HfTi': 2.9445255192919726,
 'HfZr': 3.083453571916574,
 'HfHf': 3.0673656116191044,
 'HfV': 2.844887616911763,
 'HfNb': 2.9572441802697935,
 'HfTa': 2.965091549831128,
 'HfCr': 2.7791982427854562,
 'HfMo': 2.87935385571195,
 'HfW': 2.8881014517194252,
 'HfRe': 2.837514050365385,
 'HfRu': 2.8114933577586956,
 'VAl': 2.6491889093998537,
 'VTi': 2.6985800750769795,
 'VZr': 2.867097152837066,
 'VHf': 2.844887616911763,
 'VV': 2.591424330622251,
 'VNb': 2.737275009925361,
 'VTa': 2.7435706734835947,
 'VCr': 2.5216280592456437,
 'VMo': 2.6613480087253927,
 'VW': 2.670024534115942,
 'VRe': 2.62858746194769,
 'VRu': 2.607195236672697,
 'NbAl': 2.7946915069905747,
 'NbTi': 2.8249641822131335,
 'NbZr': 2.9765220575746976,
 'NbHf': 2.9572441802697935,
 'NbV': 2.737275009925361,
 'NbNb': 2.861885570144507,
 'NbTa': 2.8690930502436722,
 'NbCr': 2.6788601562104772,
 'NbMo': 2.797338480253386,
 'NbW': 2.8054257126767492,
 'NbRe': 2.770761068398204,
 'NbRu': 2.750710298643054,
 'TaAl': 2.7941036031272426,
 'TaTi': 2.8327315970944316,
 'TaZr': 2.984102912659862,
 'TaHf': 2.965091549831128,
 'TaV': 2.7435706734835947,
 'TaNb': 2.8690930502436722,
 'TaTa': 2.87426188910476,
 'TaCr': 2.6837328473068958,
 'TaMo': 2.800530730495149,
 'TaW': 2.8105516734239893,
 'TaRe': 2.774009583106705,
 'TaRu': 2.753322140465692,
 'CrAl': 2.5751599416188777,
 'CrTi': 2.620091313839787,
 'CrZr': 2.800178188453867,
 'CrHf': 2.7791982427854562,
 'CrV': 2.5216280592456437,
 'CrNb': 2.6788601562104772,
 'CrTa': 2.6837328473068958,
 'CrCr': 2.4657198168421326,
 'CrMo': 2.6100500808561886,
 'CrW': 2.6249530552120968,
 'CrRe': 2.586330737992297,
 'CrRu': 2.5641853993155155,
 'MoAl': 2.708636905443616,
 'MoTi': 2.742131495470326,
 'MoZr': 2.90223856222122,
 'MoHf': 2.87935385571195,
 'MoV': 2.6613480087253927,
 'MoNb': 2.797338480253386,
 'MoTa': 2.800530730495149,
 'MoCr': 2.6100500808561886,
 'MoMo': 2.743904444491815,
 'MoW': 2.7524989067383077,
 'MoRe': 2.7186604575074256,
 'MoRu': 2.701416973404214,
 'WAl': 2.711988232501556,
 'WTi': 2.752341959302402,
 'WZr': 2.9120818285185828,
 'WHf': 2.8881014517194252,
 'WV': 2.670024534115942,
 'WNb': 2.8054257126767492,
 'WTa': 2.8105516734239893,
 'WCr': 2.6249530552120968,
 'WMo': 2.7524989067383077,
 'WW': 2.762571137940316,
 'WRe': 2.727778212235715,
 'WRu': 2.7093650262750115,
 'ReAl': 2.653059387018714,
 'ReTi': 2.698171419482594,
 'ReZr': 2.863217887278671,
 'ReHf': 2.837514050365385,
 'ReV': 2.62858746194769,
 'ReNb': 2.770761068398204,
 'ReTa': 2.774009583106705,
 'ReCr': 2.586330737992297,
 'ReMo': 2.7186604575074256,
 'ReW': 2.727778212235715,
 'ReRe': 2.6945953123033775,
 'ReRu': 2.6759115420345645,
 'RuAl': 2.603829855559585,
 'RuTi': 2.6711202043400126,
 'RuZr': 2.841902654830495,
 'RuHf': 2.8114933577586956,
 'RuV': 2.607195236672697,
 'RuNb': 2.750710298643054,
 'RuTa': 2.753322140465692,
 'RuCr': 2.5641853993155155,
 'RuMo': 2.701416973404214,
 'RuW': 2.7093650262750115,
 'RuRe': 2.6759115420345645,
 'RuRu': 2.6547479865729278
}

def get_LP(comp_str):
    avg_bond = 0
    comp = Composition(comp_str)
    for element1 in comp:
        for element2 in comp:
            pair = str(element1)+str(element2)
            c_pair = comp.get_atomic_fraction(element1)*comp.get_atomic_fraction(element2)
            avg_bond += B2_bond_lengths[pair]*c_pair
    avg_bond
    lp = (2/sqrt(3))*avg_bond
    return lp
    

if __name__ == "__main__":
    try:
        comp_str = sys.argv[1]
    except:
        sys.exit("Usage:   python3 LP_Tool.py [composition]")
    
    BL = get_bond_length(comp_str)
    LP = get_LP_length(BL)
    print(LP)
    
